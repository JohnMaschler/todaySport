<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<link
	rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
/>
<style>
	:root {
		--font-size-base: 1rem;
		--spacing-base: 1rem;
		--swiper-height: 5rem;
		--font-family-base: 'Roboto', sans-serif;
	}

	body {
		font-family: var(--font-family-base);
		font-size: var(--font-size-base);
		padding: 0;
		margin: 0;
	}

	.myCustomSwiper {
		display: flex;
		justify-content: flex-start;
		margin: 0;
		padding: 0;
		background-color: #000000;
		height: calc(var(--swiper-height) + 1rem);
		align-items: center;
	}

	.dropdown-container {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: space-evenly;
		/* background-color: #e1e1e1; */
		border-radius: 0.5rem;
		height: var(--swiper-height);
		padding-right: 0.25rem;
		padding-left: 0.25rem;
	}

	.dropdown-container select {
		width: 100%;
		height: 2rem; /* Specify a fixed height */
		font-size: 1rem;
		line-height: 2rem; /* Match the height for vertical centering */
		border: none;
		border-radius: 0.5rem;
		background-color: #000000 !important;
		color: white !important;
	}

	.dropdown-container select:focus {
		outline: none;
		border-color: #007bff;
		box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
	}

	/* .dropdown-container::after {
		content: '';
		position: absolute;
		top: 50%;
		right: 1rem;
		transform: translateY(-50%);
		pointer-events: none;
		font-size: 1rem;
		color: #333;
	} */

	#oddsType-MLB {
		display: block;
	}

	#oddsType-NFL {
		display: none;
		margin-top: 0;
		margin-bottom: 0.4rem;
	}

	.myCustomSwiper .swiper-container-un {
		flex-grow: 1;
		height: var(--swiper-height);
		position: relative;
		overflow: hidden;
		margin-left: var(--spacing-base);
	}

	.myCustomSwiper .swiper-slide {
		background: #d8d8d8;
		display: flex;
		justify-content: center;
		align-items: center;
		color: #000000;
		border: none;
		border-radius: 0 0 0.375rem 0.375rem;
		overflow: hidden;
	}

	.myCustomSwiper .matchup-card {
		display: grid;
		grid-template-rows: 20% 80%;
		width: 100%;
		height: 100%;
		font-size: var(--font-size-base);
		background-color: #e1e1e1;
		font-family: Arial, sans-serif;
		align-items: center;
		margin: 0.375rem 0;
		position: relative;
		border-radius: 0 0 0.375rem 0.375rem;
		overflow: hidden;
		z-index: 2;
	}

	.game-time {
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 0.75rem;
		color: black;
		/* background-color: #000000; */
		background-color: #f5f5f8;
		padding: 0.125rem 0;
		margin-top: 5px;
		width: 100%;
		height: 130%;
		/* border: 1px solid #616161; */
		border-bottom: 2px solid black;
		z-index: 5;
	}

	.myCustomSwiper .team-section {
		display: grid;
		grid-template-columns: 60% 40%;
		width: 100%;
		height: 100%;
		position: relative;
	}

	.myCustomSwiper .team-wrapper {
		display: flex;
		align-items: center;
		padding: 0.3125rem;
		justify-content: flex-start;
	}

	.myCustomSwiper .team-wrapper::after {
		content: '';
		position: absolute;
		top: 0;
		bottom: 0;
		left: 40%;
		width: 0.125rem;
		background-color: #000000;
	}

	.myCustomSwiper .team-logo {
		margin-right: 0.125rem;
		width: 1.25rem;
		height: 1.25rem;
	}

	.myCustomSwiper .team-name {
		display: flex;
		align-items: left;
		justify-content: flex-start;
        font-weight: 800;
	}

	.myCustomSwiper .matchup-value {
		display: flex;
		align-items: center;
		color: #4caf50;
		padding: 0.125rem;
		justify-content: flex-start;
		margin-left: 0.625rem;
	}

	.myCustomSwiper .matchup-value.over-under {
		top: 1.875rem;
	}

	.myCustomSwiper .swiper-button-prev,
	.myCustomSwiper .swiper-button-next {
		color: #fff;
		position: absolute;
		top: 24%;
		bottom: 0;
		transform: none;
		z-index: 10;
		width: 1.875rem;
		background: linear-gradient(to right, rgba(0, 0, 0, 0.6), transparent);
		border: none;
		outline: none;
		height: 105%;
	}

	.myCustomSwiper .swiper-button-prev {
		left: 0;
		background: linear-gradient(
			to right,
			rgb(170, 170, 170),
			rgba(137, 137, 137, 0)
		);
	}

	.myCustomSwiper .swiper-button-next {
		right: 0;
		background: linear-gradient(
			to left,
			rgb(170, 170, 170),
			rgba(137, 137, 137, 0)
		);
	}

	.myCustomSwiper .oddsType,
	.myCustomSwiper #sportType {
		background: #dddddd;
		color: #000000;
		border: 1px solid #000000;
		padding: 0.3125rem;
		width: 6.25rem;
		border-radius: 0.375rem;
	}

	.future-game-card {
		display: grid;
		grid-template-rows: 20% 80%;
		width: 100%;
		height: 100%;
		font-size: var(--font-size-base);
		background-color: #e1e1e1;
		font-family: Arial, sans-serif;
		align-items: center;
		margin: 0.375rem 0;
		position: relative;
		border-radius: 0 0 0.375rem 0.375rem;
		overflow: hidden;
		z-index: 2;
	}

	.future-game-time {
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 0.75rem;
		color: white;
		background-color: #000000;
		border-bottom: 2px solid #000000;
		padding: 0.125rem 0;
		width: 100%;
		height: 100%;
	}

	.future-team-section {
		display: flex;
		justify-content: space-around;
		align-items: center;
		width: 100%;
		height: 60%;
	}

	.future-team-wrapper {
		display: flex;
		align-items: center;
	}

	.future-team-logo {
		margin-right: 0.3125rem;
		width: 1.25rem;
		height: 1.25rem;
	}

	.future-venue {
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 0.75rem;
		color: #616161;
		margin-top: 0.3125rem;
		width: 100%;
		height: 20%;
	}

	.today {
		font-size: 1.5rem;
	}

	.sharpBet {
		position: relative;
		font-weight: 900;
	}

	.sharpBet::after {
		content: '$';
		margin-left: 2px;
		color: red;
	}

    .sharpBetKey {
        color: red;
        font-size: calc(var(--font-size-base) - .2rem);
    }

	/* Media queries for responsiveness */
	@media (max-width: 1400px) {
		.myCustomSwiper {
			width: 100%;
			max-width: 100%;
		}
	}

	@media (max-width: 1200px) {
		:root {
			--font-size-base: 2rem;
			--spacing-base: 1.75rem;
			--swiper-height: 7rem;
		}

        .sharpBetKey {
            font-size: 1rem;
        }

		#oddsType-NFL {
			display: none;
			margin-top: 0;
			margin-bottom: 1rem;
		}

		.dropdown-container {
			margin-right: 0.5rem;
		}

		.myCustomSwiper .swiper-container-un {
			margin-left: 0;
		}

		.myCustomSwiper .swiper-button-prev,
		.myCustomSwiper .swiper-button-next {
			height: 100%;
		}

		.game-time {
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 1rem;
			color: black;
			background-color: #f5f5f8;
			padding: 0.125rem 0;
			margin-top: 5px;
			width: 100%;
			height: 130%;
			border-bottom: 2px solid black;
			z-index: 5;
		}
	}

	@media (max-width: 570px) {
		:root {
			--font-size-base: 0.875rem; /* Slightly larger font size for readability */
			--spacing-base: 1.5rem; /* Adjusted spacing */
			--swiper-height: 5rem; /* Slightly increased swiper height for better visibility */
		}

        .sharpBetKey {
            font-size: calc(var(--font-size-base) - 0.2rem);
        }

		#oddsType-NFL {
			display: none;
			margin-top: 0;
			margin-bottom: 1rem;
		}

		.dropdown-container {
			margin-right: 0.25rem;
			margin-left: 0.25rem; /* Centered dropdowns better on mobile */
			padding-right: 0.1rem;
			padding-left: 0.1rem;
		}

		.myCustomSwiper .swiper-container-un {
			margin-left: 0;
			width: 100%; /* Ensure full width on mobile */
		}

		.myCustomSwiper .swiper-button-prev,
		.myCustomSwiper .swiper-button-next {
			display: none;
		}

		.game-time {
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 0.875rem; /* Reduced slightly for mobile */
			color: black;
			background-color: #f5f5f8;
			padding: 0.25rem 0.5rem; /* Increased padding for touch targets */
			margin-top: 5px;
			width: 100%;
			height: 130%; /* Auto height for better text wrapping */
		}

		.myCustomSwiper .team-wrapper {
			display: flex;
			align-items: center;
			/* padding: 0.2rem; */
			padding-left: 0.6rem;
			padding-top: 0;
			padding-bottom: 0;
			justify-content: flex-start; /* Centered content */
			flex-direction: row;
		}

		.myCustomSwiper .team-logo {
			margin-bottom: 0;
			width: 1.2rem; /* Slightly increased size for better visibility */
			height: 1.2rem; /* Keep the logo proportional */
		}

		.myCustomSwiper .team-name {
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 0.875rem; /* Match with root font size */
		}

		.myCustomSwiper .team-wrapper::after {
			content: '';
			position: absolute;
			top: 0;
			bottom: 0;
			left: 50%;
			width: 0.125rem;
			background-color: #000000;
		}

		.myCustomSwiper .team-section {
			margin-top: 0.5rem;
		}
	}
</style>

<div class="myCustomSwiper">
	<div class="dropdown-container">
        <div class="sharpBetKey">$ Sharp Bet</div>
		<div class="dropdown-wrapper">
			<select id="sportType" onchange="updateSport()">
				<option value="mlb">MLB</option>
				<option value="nfl">NFL</option>
			</select>
		</div>
		<div class="dropdown-wrapper">
			<select id="oddsType-MLB" class="oddsType" onchange="updateDisplay()">
				<option value="ml">ML</option>
				<option value="mlmoney">ML $</option>
				<option value="spread">Spread $</option>
				<option value="over-under">O/U</option>
				<option value="total">O/U $</option>
			</select>
		</div>
		<div class="dropdown-wrapper">
			<select id="oddsType-NFL" class="oddsType" onchange="updateDisplay()">
				<option value="ml">ML</option>
				<option value="spread">Spread</option>
				<option value="total">Pt. Spread</option>
				<option value="over-under">O/U</option>
			</select>
		</div>
	</div>
	<div class="swiper-container-un">
		<div class="swiper-wrapper" id="sports">
			<!-- Slides will populate here -->
		</div>
		<div class="swiper-button-prev"></div>
		<div class="swiper-button-next"></div>
	</div>
</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<script>
	document.getElementById('oddsType-NFL').style.display = 'none';
	let swiper1;

	const teamIDs = {
		ARI: 109,
		ATL: 144,
		BAL: 110,
		BOS: 111,
		CHC: 112,
		CHW: 145,
		CIN: 113,
		CLE: 114,
		COL: 115,
		DET: 116,
		HOU: 117,
		KC: 118,
		LAA: 108,
		LAD: 119,
		MIA: 146,
		MIL: 158,
		MIN: 142,
		NYY: 147,
		NYM: 121,
		OAK: 133,
		PHI: 143,
		PIT: 134,
		SD: 135,
		SF: 137,
		SEA: 136,
		STL: 138,
		TB: 139,
		TEX: 140,
		TOR: 141,
		WSH: 120,
	};

	window.onload = function () {
		// adjustFontSize();
		swiper1 = new Swiper('.myCustomSwiper .swiper-container-un', {
			slidesPerView: 5,
			spaceBetween: 2,
			pagination: {
				el: '.swiper-pagination',
				clickable: true,
			},
			navigation: {
				nextEl: '.swiper-button-next',
				prevEl: '.swiper-button-prev',
			},
			loop: false,
			observer: true,
			observeParents: true,
			observeSlideChildren: true,
			breakpoints: {
				320: {
					slidesPerView: 2,
					spaceBetween: 4,
				},
				480: {
					slidesPerView: 2,
					spaceBetween: 4,
				},
				640: {
					slidesPerView: 3,
					spaceBetween: 4,
				},
				768: {
					slidesPerView: 3,
					spaceBetween: 4,
				},
				920: {
					slidesPerView: 3,
					spaceBetween: 4,
				},
				1050: {
					slidesPerView: 4,
					spaceBetween: 4,
				},
				1280: {
					slidesPerView: 7,
					spaceBetween: 4,
				},
			},
			on: {
				slideChange: function () {
					togglePrevButton();
				},
			},
		});

		fetchMatchups();
		// fetchNFLGames(); //uncomment whichever one you want to show up on initial load
		swiper1.update();
		togglePrevButton();
	};
	// document.getElementById('sportType').addEventListener('change', updateSport);
	// document
	// 	.getElementById('oddsType-MLB')
	// 	.addEventListener('change', adjustFontSize);
	// document
	// 	.getElementById('oddsType-NFL')
	// 	.addEventListener('change', adjustFontSize);

	function togglePrevButton() {
		const prevButton = document.querySelector('.swiper-button-prev');
		if (swiper1.activeIndex === 0) {
			prevButton.style.display = 'none';
		} else {
			prevButton.style.display = '';
		}
	}

	function adjustFontSize() {
		const dropdowns = document.querySelectorAll('.oddsType');
		dropdowns.forEach((dropdown) => {
			const selectedOption = dropdown.options[dropdown.selectedIndex];
			const testSpan = document.createElement('span');
			testSpan.style.visibility = 'hidden';
			testSpan.style.position = 'absolute';
			testSpan.style.whiteSpace = 'nowrap';
			testSpan.innerText = selectedOption.text;
			document.body.appendChild(testSpan);

			let fontSize = 16; // starting font size in pixels
			let dropdownWidth = dropdown.clientWidth - 30; // Adjust for padding

			while (testSpan.clientWidth > dropdownWidth && fontSize > 8) {
				fontSize--;
				testSpan.style.fontSize = `${fontSize}px`;
			}

			dropdown.style.fontSize = `${fontSize}px`;
			document.body.removeChild(testSpan);
		});
	}

	function fetchMatchups() {
		fetch('https://todaysport-lerxv37nxa-uc.a.run.app/')
			.then((response) => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				return response.json();
			})
			.then((data) => {
				loadMatchups(JSON.parse(data));
				fetchFutureGames();
			})
			.catch((error) => {
				console.error('Error fetching data:', error);
				// alert('Failed to fetch data from the server');
				fetchFutureGames();
			});
	}

	function fetchFutureGames() {
		fetch('https://todaysport-lerxv37nxa-uc.a.run.app/future')
			.then((response) => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				return response.json();
			})
			.then((futureData) => {
				loadFutureGames(JSON.parse(futureData));
			})
			.catch((error) => {
				console.error('Error fetching data:', error);
				alert('Failed to fetch data from the server');
			});
	}

	function fetchNFLGames() {
		fetch('https://todaysport-lerxv37nxa-uc.a.run.app/nfl-games')
			.then((response) => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				return response.json();
			})
			.then((nflData) => {
				// console.log(nflData);
				loadNFLmatchups(nflData);
			})
			.catch((error) => {
				console.error('Error fetching data:', error);
				alert('Failed to fetch data from the server');
			});
	}

	function convertPSTToLocal(timeString) {
		// Parse the input time string (e.g., "10:10 AM" or "03:30 PM")
		const [time, modifier] = timeString.split(' ');

		let [hours, minutes] = time.split(':').map(Number);

		if (modifier === 'PM' && hours < 12) {
			hours += 12;
		} else if (modifier === 'AM' && hours === 12) {
			hours = 0;
		}

		// Create a Date object in UTC equivalent to the PST time
		const utcDate = new Date(Date.UTC(2024, 0, 1, hours + 8, minutes, 0)); // +8 because PST is UTC-8

		// Convert to local time
		const localDate = new Date(
			utcDate.toLocaleString('en-US', {
				timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
			})
		);

		// Format the local time in 12-hour format with AM/PM
		const options = { hour: '2-digit', minute: '2-digit', hour12: true };
		return localDate.toLocaleTimeString([], options);
	}

	function loadMatchups(matchups) {
		swiper1.removeAllSlides();

		matchups.forEach((matchup, index) => {
			const homeLogo = `<img src="https://www.mlbstatic.com/team-logos/team-cap-on-dark/${
				teamIDs[matchup.Home]
			}.svg" alt="${matchup.Home}" class="team-logo">`;
			const visitorLogo = `<img src="https://www.mlbstatic.com/team-logos/team-cap-on-dark/${
				teamIDs[matchup.Visitor]
			}.svg" alt="${matchup.Visitor}" class="team-logo">`;
			let displayDate;
			if (matchup.GameTime === 'Today') {
				displayDate = 'Today';
			} 
      else if (matchup.GameTime === 'Live') {
      	displayDate = 'Live';
      }
      else {
				displayDate = `Today&nbsp;@&nbsp;${convertPSTToLocal(
					String(matchup.GameTime)
				)}`;
			}

			// isSharpML
			// isSharpSpread
			// isSharpOU

			// if (isSharpOU(matchup.TotalMoneyPercentVisitor, matchup.TotalMoneyBetPercentVisitor)){

			// }

			const slideContent = `<div class="swiper-slide">
                    <div class="matchup-card">
                        <div class="game-time">${displayDate}</div>
                        <div class="team-section">
                            <div class="team-wrapper">
                                ${visitorLogo} <div class="team-name">${matchup.Visitor}</div>
                            </div>
                            <div class="matchup-value" id="ml-visitor-${index}" style="display: flex;">${matchup.VisitorMoneyLine}</div>
                            <div class="matchup-value" id="mlvisitor-percent-${index}" style="display: flex;">${matchup.VisitorMoneyLinePercent}</div>
                            <div class="matchup-value" id="spread-visitor-${index}" style="display: none;">${matchup.VisitorSpreadPercent}</div>
                            <div class="matchup-value" id="total-visitor-${index}" style="display: none;">${matchup.TotalMoneyPercentVisitor}</div>
                            <div class="matchup-value" id="over-under-home-${index}" style="display: none;" class="over-under">${matchup.TotalRuns}</div>
                            <div class="team-wrapper">
                                ${homeLogo} <div class="team-name">${matchup.Home}</div>
                            </div>
                            <div class="matchup-value" id="ml-home-${index}" style="display: flex;">${matchup.HomeMoneyLine}</div>
                            <div class="matchup-value" id="mlhome-percent-${index}" style="display: flex;">${matchup.HomeMoneyLinePercent}</div>
                            <div class="matchup-value" id="spread-home-${index}" style="display: none;">${matchup.HomeSpreadPercent}</div>
                            <div class="matchup-value" id="total-home-${index}" style="display: none;">${matchup.TotalMoneyPercentHome}</div>
                    </div>
                </div>`;
			swiper1.appendSlide(slideContent);
			if (
				isSharpML(
					matchup.VisitorMoneyLinePercent,
					matchup.VisitorMoneyLineBetPercent
				)
			) {
				document
					.getElementById('ml-visitor-' + index)
					.classList.add('sharpBet');
			}
			if (
				isSharpSpread(
					matchup.VisitorSpreadPercent,
					matchup.VisitorSpreadBetPercent
				)
			) {
				document
					.getElementById('spread-visitor-' + index)
					.classList.add('sharpBet');
			}
			if (
				isSharpML(
					matchup.HomeMoneyLinePercent,
					matchup.HomeMoneyLineBetPercent
				)
			) {
				document
					.getElementById('ml-home-' + index)
					.classList.add('sharpBet');
			}
			if (
				isSharpSpread(
					matchup.HomeSpreadPercent,
					matchup.HomeSpreadBetPercent
				)
			) {
				document
					.getElementById('spread-home-' + index)
					.classList.add('sharpBet');
			}
		});
		updateDisplay();
	}

	function loadFutureGames(games) {
		swiper1.appendSlide(
			`<div class="swiper-slide" style="color: #fff; background: #000000;"><div class="game-card"><div class="future-team-section today" style="text-align: center;">Upcoming<br />Games</div></div></div>`
		);

		games.forEach((game, index) => {
			const homeLogo = `<img src="https://www.mlbstatic.com/team-logos/team-cap-on-dark/${
				teamIDs[game.home_team]
			}.svg" alt="${game.home_team}" class="future-team-logo">`;
			const visitorLogo = `<img src="https://www.mlbstatic.com/team-logos/team-cap-on-dark/${
				teamIDs[game.away_team]
			}.svg" alt="${game.away_team}" class="future-team-logo">`;
			const slideContent = `<div class="swiper-slide">
	               <div class="future-game-card">
	                   <div class="game-time">${game.date} @ ${convertPSTToLocal(
				String(game.time)
			)}</div>
                        <div class="future-team-section">
                            <div class="future-team-wrapper">
                                ${visitorLogo} <div class="team-name">${
				game.away_team
			}</div>
	                            <span>&nbsp;vs.&nbsp;</span>
	                            ${homeLogo} <div class="team-name">${
				game.home_team
			}</div>
	                        </div>
	                    </div>
	                </div>
	            </div>`;
			swiper1.appendSlide(slideContent);
		});
		swiper1.update();
	}

	function loadNFLmatchups(games) {
		swiper1.removeAllSlides();
		swiper1.update();

		// Group games by week
		const gamesByWeek = games.reduce((acc, game) => {
			const week = game.week;
			const season = game.season;
			if (!acc[week]) {
				acc[week] = { games: [], season: season };
			}
			acc[week].games.push(game);
			return acc;
		}, {});

		// Append slides for each week
		for (const week in gamesByWeek) {
			const weekGames = gamesByWeek[week].games;
			const season = gamesByWeek[week].season;

			// Append a slide for the week
			swiper1.appendSlide(
				`<div class="swiper-slide" style="color: #fff; background: #000000;"><div class="game-card"><div class="future-team-section today" style="text-align: center;">${season}<br />Week ${week}</div></div></div>`
			);

			// Append slides for the games in the week
			weekGames.forEach((game, index) => {
				const [nflGameDate, nflGameTime, ampm] = String(game.game_date).split(
					' '
				);

				const localGameTime = convertPSTToLocal(nflGameTime + ' ' + ampm);

				const homeLogo = `<img src="${game.home_logo}" alt="${game.home_team}" class="team-logo">`;
				const visitorLogo = `<img src="${game.away_logo}" alt="${game.away_team}" class="team-logo">`;
				const slideContent = `<div class="swiper-slide">
				<div class="matchup-card">
					<div class="game-time">${nflGameDate}&nbsp;@&nbsp;${localGameTime}</div>
					<div class="team-section">
                        <div class="team-wrapper">
							${visitorLogo} <div class="team-name">${game.away_team}</div>
						</div>
						<div class="matchup-value" id="ml-visitor-${index}" style="display: flex;">${game.away_team_moneyline_odds}</div>
						<div class="matchup-value" id="spread-visitor-${index}" style="display: none;">${game.away_team_spread_odds}</div>
						<div class="matchup-value" id="total-visitor-${index}" style="display: none;">${game.away_team_Pspread_odds}</div>
                        <div class="matchup-value" id="over-under-home-${index}" style="display: none;" class="over-under">${game.over_under}</div>
						<div class="team-wrapper">
							${homeLogo} <div class="team-name">${game.home_team}</div>
						</div>
						<div class="matchup-value" id="ml-home-${index}" style="display: flex;">${game.home_team_moneyline_odds}</div>
						<div class="matchup-value" id="spread-home-${index}" style="display: none;">${game.home_team_spread_odds}</div>
						<div class="matchup-value" id="total-home-${index}" style="display: none;">${game.home_team_Pspread_odds}</div>
					</div>
				</div>
			</div>`;
				swiper1.appendSlide(slideContent);
			});
		}

		swiper1.update();
		updateDisplay();
	}

	function updateDisplay() {
		const sportType = document.getElementById('sportType').value;
		const oddsTypeElement = document.getElementById(
			`oddsType-${sportType.toUpperCase()}`
		);
		const oddsType = oddsTypeElement ? oddsTypeElement.value : 'ml';

		document.querySelectorAll('.matchup-value').forEach((el) => {
			el.style.display = 'none';
			el.classList.remove('over-under');
		});

		if (oddsType === 'over-under') {
			document.querySelectorAll(`[id^='over-under-home-']`).forEach((el) => {
				el.style.display = 'flex';
				el.classList.add('over-under');
			});
			document.querySelectorAll(`[id^='over-under-visitor-']`).forEach((el) => {
				el.style.display = 'flex';
				el.classList.add('over-under');
			});
		} else if (oddsType === 'ml') {
			document.querySelectorAll(`[id^='ml-home-']`).forEach((el) => {
				el.style.display = 'flex';
			});
			document.querySelectorAll(`[id^='ml-visitor-']`).forEach((el) => {
				el.style.display = 'flex';
			});
		} else if (oddsType === 'mlmoney') {
			document.querySelectorAll(`[id^='mlhome-percent-']`).forEach((el) => {
				el.style.display = 'flex';
			});
			document.querySelectorAll(`[id^='mlvisitor-percent-']`).forEach((el) => {
				el.style.display = 'flex';
			});
		} else {
			document.querySelectorAll(`[id^='${oddsType}-home-']`).forEach((el) => {
				el.style.display = 'flex';
			});
			document
				.querySelectorAll(`[id^='${oddsType}-visitor-']`)
				.forEach((el) => {
					el.style.display = 'flex';
				});
		}
	}

	function updateSport() {
		const sportType = document.getElementById('sportType').value;
		const oddsTypeMLB = document.getElementById('oddsType-MLB');
		const oddsTypeNFL = document.getElementById('oddsType-NFL');
		swiper1.removeAllSlides();
		swiper1.slideTo(0);

		if (sportType === 'mlb') {
			oddsTypeMLB.style.display = 'block';
			oddsTypeNFL.style.display = 'none';
			fetchMatchups();
		} else if (sportType === 'nfl') {
			oddsTypeMLB.style.display = 'none';
			oddsTypeNFL.style.display = 'block';
			fetchNFLGames();
		}
		// adjustFontSize();
	}

	function isSharpML(moneyP, betP) {
		moneyP = Number(moneyP.replace('%', ''));
		betP = Number(betP.replace('%', ''));
		return moneyP >= 45 && moneyP - betP >= 26;
	}

	function isSharpSpread(moneyP, betP) {
		moneyP = Number(moneyP.replace('%', ''));
		betP = Number(betP.replace('%', ''));
		return moneyP >= 45 && moneyP - betP >= 26;
	}

	function isSharpOU(moneyP, betP) {
		moneyP = Number(moneyP.replace('%', ''));
		betP = Number(betP.replace('%', ''));
		return moneyP >= 45 && moneyP - betP >= 26;
	}
</script>
